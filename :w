#include "meta_ir.h"
#include <stdio.h>

void
meta_init(Meta *meta)
{
    scopes_init(&meta->scopes, 16);
    mnv_init(&meta->strs, 16);
}

void
meta_collect_scope(MetaScope *scope, &scope)
{

}

void
meta_collect(Meta *meta, AST *ast)
{
    size_t c = 0;
    Node *curr = ast_next(ast);
    MetaScope curr_scope;
    bool in_scope = false;
    while (curr)
    {
        printf("NODE T %d\n", curr->type);
        if (in_scope)
        {
            if (curr->type = NT_FN_DEF || curr->type == NT_FN_DECL)
            { assert(0 && "FN DEF OR DECL IN SCOPE"); }
            mnv_init(&curr_scope.vars, 32);
        }
        


        c++;
        curr = ast_next(ast);
    }
    printf("NODE END\n");
}

DEFINE_DYNARRAY(mnv, MNVec, Node *);
DEFINE_DYNARRAY(scopes, Scopes, MetaScope);
